variables:
  CI_LIBRARY_REF_NAME: $CI_COMMIT_REF_NAME

test container image jobs:
  rules:
  - changes:
    - .gitlab-ci.yml
    - container-image/**/*
    - generic/**/*
  trigger:
    include: container-image/test/.gitlab-ci.yml
    strategy: depend

test helm jobs:
  rules:
  - changes:
    - .gitlab-ci.yml
    - generic/**/*
    - helm/**/*
  trigger:
    project: devops/samples/tysa
    strategy: depend

test helmfile jobs:
  rules:
  - changes:
    - .gitlab-ci.yml
    - generic/**/*
    - helmfile/**/*
  trigger:
    project: devops/samples/moon
    strategy: depend

test terragrunt jobs:
  rules:
  - changes:
    - .gitlab-ci.yml
    - generic/**/*
    - terragrunt-jobs.yaml
  trigger:
    project: devops/samples/ovaz
    strategy: depend

test helmfile infra pipeline:
  rules:
  - changes:
    - .gitlab-ci.yml
    - generic/**/*
    - helmfile-infra/**/*
  trigger:
    branch: release/0.0.0
    project: devops/samples/ikva/ikva-service
    strategy: depend

test python jobs:
  rules:
  - changes:
    - .gitlab-ci.yml
    - generic/**/*
    - python/**/*
  trigger:
    project: devops/samples/psel
    strategy: depend
